(()=>{"use strict";({weatherApi:()=>({callWeatherApi:t=>new Promise((e=>{fetch(`${"http:"===window.location.protocol?"http":"https"}://api.openweathermap.org/data/2.5/weather?q=${t}&callback=test&appid=a71219e79a6b01978ac3a9f3ffccca37`,{method:"get",mode:"cors"}).then((t=>{if(!t.ok)throw Error(t.statusText);return t.text()})).then((t=>{let i=t.split("");i=i.slice(5,i.length-1).join("");const a=JSON.parse(i);e({status:!0,response:a})})).catch((t=>{e({status:!1,response:t})}))}))}),divContent:document.getElementById("content"),hTitle:document.createElement("h2"),pExplain:document.createElement("p"),divLeft:document.createElement("div"),divCenter:document.createElement("div"),divRight:document.createElement("div"),divList:document.createElement("div"),divSearch:document.createElement("div"),paragraph:document.createElement("p"),headAdd:document.createElement("h3"),labelCity:document.createElement("label"),nameCity:document.createElement("input"),labelError:document.createElement("label"),colorParams:["text-success","text-warning","text-danger"],buttonSearch:document.createElement("button"),async loadPageContent(){const t=this;this.divContent.classList.add("col-12"),this.divContent.classList.add("row"),this.divContent.classList.add("content"),this.hTitle.classList.add("col-12"),this.hTitle.classList.add("text-center"),this.hTitle.innerText="WEATHER CONDITION",this.pExplain.classList.add("col-12"),this.pExplain.classList.add("text-center"),this.pExplain.innerText="Complete the form, search a city by name and choose a temperature unit to get updated information.",this.divLeft.classList.add("col-2"),this.divCenter.classList.add("col-8"),this.divCenter.classList.add("row"),this.divCenter.classList.add("black-background"),this.divRight.classList.add("col-2"),this.divCenter.appendChild(this.hTitle),this.divCenter.appendChild(this.pExplain),this.divCenter.appendChild(this.divSearch),this.divCenter.appendChild(this.divList),this.divContent.appendChild(this.divLeft),this.divContent.appendChild(this.divCenter),this.divContent.appendChild(this.divRight),this.loadDivShowResult(),this.loadDivSearchCity(),this.buttonSearch.onclick=()=>{t.getWeather()},this.nameCity.value="Miami",await this.getWeather(),this.labelError.innerText=""},loadDivSearchCity(){this.divSearch.classList.add("child-width"),this.divSearch.classList.add("col-6"),this.nameCity.type="text",this.headAdd.innerText="Search city",this.nameCity.placeholder="City name",this.buttonSearch.innerText="Search",this.labelCity.innerText="City name:",this.divSearch.appendChild(this.headAdd),this.divSearch.appendChild(this.labelCity),this.divSearch.appendChild(this.nameCity),this.divSearch.appendChild(this.buttonSearch),this.divSearch.appendChild(this.labelError)},async getWeather(){if(""===this.nameCity.value)return this.addLabelErrorColor(1),void(this.labelError.innerText="City name field cannot be blank");this.labelError.innerText="",await this.getWeatherData()},async getWeatherData(){const t=await this.weatherApi().callWeatherApi(this.nameCity.value);if(t.status){const e=t.response;this.paragraph.innerHTML=`<h3>${this.nameCity.value} weather condition</h3>\n            <p><img src="http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png" width="100" height="100" />\n            <label>${e.weather[0].description}</label>\n            </p>\n            <p><strong>country code:</strong> ${e.sys.country}</p>\n            <p><strong>longitude:</strong> ${e.coord.lon} 째</p>\n            <p><strong>latitude:</strong> ${e.coord.lat} 째</p>\n            <p><strong>temperature:</strong> <span id="spanTemp">${(Number(e.main.temp)-273.15).toFixed(2)}</span>\n            <label class="switch">\n  <input type="checkbox" id="toggleTemp" checked>\n  <span class="slider round">\n  <span>C째</span>\n  <span>F째</span>\n  </span>\n  </label></p>\n            <p><strong>pressure:</strong> ${e.main.pressure} hPa</p>\n            <p><strong>humidity:</strong> ${e.main.humidity} %</p>\n            <p><strong>wind speed:</strong> ${e.wind.speed} km/h</p>`,document.getElementsByTagName("body")[0].style=`background-image: url("../images/${e.weather[0].icon}.jpg");`,document.getElementById("toggleTemp").onclick=t=>{const{checked:e}=document.getElementById(t.target.id);document.getElementById("spanTemp").innerText=e?((Number(document.getElementById("spanTemp").innerText)-32)*(5/9)).toFixed(2):(1.8*Number(document.getElementById("spanTemp").innerText)+32).toFixed(2)},this.nameCity.value="",this.addLabelErrorColor(0),this.labelError.innerText="search successfully completed"}else this.addLabelErrorColor(2),this.labelError.innerText=t.response},addLabelErrorColor(t){for(let e=0;e<this.colorParams.length;e+=1)e===t?this.labelError.classList.add(this.colorParams[e]):this.labelError.classList.remove(this.colorParams[e])},loadDivShowResult(){this.divList.classList.add("col-6"),this.paragraph.classList.add("child-width"),this.divList.appendChild(this.paragraph)}}).loadPageContent()})();